Hello! I'm Claude on the HAS server and I need to set up Perplexity MCP server to extend my capabilities with advanced web search and research.

## Current Situation:
- **Server:** 192.168.0.58 (Alpine Linux 3.19)
- **Claude Code CLI:** âœ“ Installed and functional
- **Existing Configuration:** `/home/milhy777/Develop/Configuration-Files/mcp_servers_192_168_0_58.json`

## Task: Setting up Perplexity MCP Server

### 1. Analyze existing configuration
First read the existing MCP configuration from the main computer:
```bash
scp milhy777@192.168.0.50:/home/milhy777/Develop/Configuration-Files/mcp_servers_192_168_0_58.json /tmp/reference-config.json
```

### 2. Install Perplexity MCP Server
```bash
# Option A: NPM installation (if exists as package)
npm install -g @modelcontextprotocol/server-perplexity

# Option B: Manual installation from repository
cd /opt
git clone https://github.com/modelcontextprotocol/servers.git mcp-servers
cd mcp-servers/src/perplexity
npm install
npm run build
```

### 3. Configure API key
Perplexity requires API key:
```bash
# Get Perplexity Pro API key from user
echo "export PERPLEXITY_API_KEY=your_api_key_here" >> /etc/environment
source /etc/environment
```

### 4. Create MCP configuration
Create `/root/.claude/mcp_servers.json`:
```json
{
  "mcpServers": {
    "perplexity": {
      "command": "npx",
      "args": [
        "@modelcontextprotocol/server-perplexity"
      ],
      "env": {
        "PERPLEXITY_API_KEY": "$PERPLEXITY_API_KEY"
      }
    }
  }
}
```

### 5. Alternative configuration (HTTP MCP server)
If Perplexity server is available as HTTP service:
```json
{
  "mcpServers": {
    "perplexity": {
      "url": "http://192.168.0.58:8081/mcp",
      "transport": "http"
    }
  }
}
```

### 6. Testing and verification
```bash
# Test MCP server
claude-code --mcp-debug

# Verify Perplexity functionality
# Run Claude and test: "Search for latest AI news using Perplexity"
```

### 7. Firewall configuration (if needed)
```bash
# For HTTP MCP server
iptables -I INPUT -p tcp --dport 8081 -s 192.168.0.0/24 -j ACCEPT
iptables-save > /etc/iptables/rules-save
```

## Expected Results:
After successful setup I will have access to:
- **Web search** via Perplexity API
- **Research capabilities** with source citations
- **Real-time information** from the web
- **Advanced AI search** capabilities

## Troubleshooting:
- **API key:** Check validity of Perplexity Pro subscription
- **Network:** Verify access to api.perplexity.ai
- **Permissions:** Claude Code must have permissions for MCP servers
- **Dependencies:** Node.js and npm must be properly configured

## Solution Priorities:
1. **Get Perplexity API key** from user
2. **Find correct Perplexity MCP server** (NPM package or GitHub)
3. **Configure MCP communication** (STDIO vs HTTP)
4. **Test functionality** with real queries

## Notes:
- Perplexity MCP server may be in development - check availability
- Alternatively I can use direct Perplexity API calls via WebFetch
- Maintain compatibility with existing MCP infrastructure on 192.168.0.58

Do you want to start with installation or do you have Perplexity API key ready?